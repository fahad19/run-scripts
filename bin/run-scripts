#!/usr/bin/env node

'use strict';

var async = require('async');

var scripts = process.argv.slice(2);
if (scripts.length === 0) {
	console.log('You need to pass some commands as arguments.');
	return;
}

var runScripts = require('../');
var commands = runScripts(scripts);

var sys = require('sys');
var exec = require('child_process').exec;

async.series(commands.map(function (command) {
	return function (callback) {
		exec(command, function (error, stdout, stderr) {
			sys.print(stdout);
			sys.print(stderr);

			if (error !== null) {
				console.log('exec error: ' + error);
			}

			callback();
		});
	};
}));
