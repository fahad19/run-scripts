#!/usr/bin/env node

'use strict';


var scripts = process.argv.slice(2);
if (scripts.length === 0) {
	console.log('You need to pass some commands as arguments.');
	return;
}

var runScripts = require('../');
var commands = runScripts(scripts);

var async = require('async');
var run = require('../run');
var sys = require('sys');
async.series(commands.map(function (command) {
	return function (callback) {
		run(command, function (error, stdout, stderr) {
			sys.print(stdout);
			sys.print(stderr);

			if (error !== null) {
				console.log('exec error: ' + error);
			}

			callback(error);
		});
	};
}), function (error) {
	if (typeof error === 'undefined' || typeof error.code === 'undefined') {
		return;
	}
	process.exit(error.code);
});
